FROM node:alpine

WORKDIR /app

COPY package.json .

RUN npm install

COPY . .

EXPOSE 3000

ARG KAKAO_API_VALUE \
    NEXT_PUBLIC_API_URL_VALUE

ENV KAKAO_API_KEY=$KAKAO_API_VALUE  \
    NEXT_PUBLIC_API_URL=$NEXT_PUBLIC_API_URL_VALUE

RUN npm run build

CMD [ "npm", "start" ]